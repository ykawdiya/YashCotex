<Window x:Class="WeighbridgeSoftwareYashCotex.Views.TwoFactorVerificationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ðŸ” Two-Factor Authentication" 
        Height="450" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="#f8f9fa" ResizeMode="NoResize">

    <Window.Resources>
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="#2c3e50"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="40"/>
        </Style>
        
        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#007bff"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#28a745"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#dc3545"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="LinkButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#007bff"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Grid Margin="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#343a40" CornerRadius="8" Padding="25" Margin="0,0,0,30">
            <StackPanel>
                <TextBlock Text="ðŸ” TWO-FACTOR AUTHENTICATION" 
                           FontSize="20" FontWeight="Bold" 
                           Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock x:Name="UserNameText" Text="Super Admin Access Verification" 
                           FontSize="14" Foreground="#adb5bd" 
                           HorizontalAlignment="Center" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
            
            <!-- TOTP Verification -->
            <StackPanel x:Name="TOTPPanel" Visibility="Visible">
                <Border Background="#e3f2fd" BorderBrush="#2196f3" BorderThickness="1" 
                        CornerRadius="5" Padding="20" Margin="0,0,0,25">
                    <StackPanel>
                        <TextBlock Text="ðŸ“± Enter the 6-digit code from your authenticator app" 
                                   FontWeight="Bold" Foreground="#1976d2" HorizontalAlignment="Center"/>
                        <TextBlock Text="(Google Authenticator, Microsoft Authenticator, etc.)" 
                                   FontSize="12" Foreground="#666" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <TextBlock Text="Verification Code:" Style="{StaticResource HeaderStyle}" HorizontalAlignment="Center"/>
                <TextBox x:Name="TOTPCodeTextBox" 
                         FontFamily="Consolas" FontSize="24" FontWeight="Bold"
                         TextAlignment="Center" MaxLength="6"
                         Width="200" Height="50" Padding="10"
                         Margin="0,0,0,20" BorderThickness="2"
                         BorderBrush="#007bff"/>
                
                <Button x:Name="VerifyTOTPButton" Content="âœ… Verify Code" 
                        Style="{StaticResource SuccessButton}" 
                        Click="VerifyTOTPButton_Click" 
                        Width="150" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Email/SMS Verification -->
            <StackPanel x:Name="EmailSMSPanel" Visibility="Collapsed">
                <Border Background="#e3f2fd" BorderBrush="#2196f3" BorderThickness="1" 
                        CornerRadius="5" Padding="20" Margin="0,0,0,25">
                    <StackPanel>
                        <TextBlock x:Name="EmailSMSInstructionText" 
                                   Text="ðŸ“§ Enter the verification code sent to your email" 
                                   FontWeight="Bold" Foreground="#1976d2" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="EmailSMSTargetText" 
                                   Text="Check your inbox for the verification code" 
                                   FontSize="12" Foreground="#666" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <TextBlock Text="Verification Code:" Style="{StaticResource HeaderStyle}" HorizontalAlignment="Center"/>
                <TextBox x:Name="EmailSMSCodeTextBox" 
                         FontFamily="Consolas" FontSize="24" FontWeight="Bold"
                         TextAlignment="Center" MaxLength="6"
                         Width="200" Height="50" Padding="10"
                         Margin="0,0,0,10" BorderThickness="2"
                         BorderBrush="#007bff"/>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                    <Button x:Name="ResendCodeButton" Content="ðŸ“§ Resend Code" 
                            Style="{StaticResource LinkButton}" 
                            Click="ResendCodeButton_Click"/>
                    <TextBlock x:Name="ResendCountdownText" Text="" 
                               VerticalAlignment="Center" Margin="10,0,0,0" 
                               Foreground="#666" FontSize="12"/>
                </StackPanel>
                
                <Button x:Name="VerifyEmailSMSButton" Content="âœ… Verify Code" 
                        Style="{StaticResource SuccessButton}" 
                        Click="VerifyEmailSMSButton_Click" 
                        Width="150" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Backup Code Verification -->
            <StackPanel x:Name="BackupCodePanel" Visibility="Collapsed">
                <Border Background="#fff3cd" BorderBrush="#ffc107" BorderThickness="1" 
                        CornerRadius="5" Padding="20" Margin="0,0,0,25">
                    <StackPanel>
                        <TextBlock Text="ðŸ”‘ Using backup recovery code" 
                                   FontWeight="Bold" Foreground="#856404" HorizontalAlignment="Center"/>
                        <TextBlock Text="Each backup code can only be used once" 
                                   FontSize="12" Foreground="#856404" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <TextBlock Text="Backup Code (Format: XXXX-XXXX):" Style="{StaticResource HeaderStyle}" HorizontalAlignment="Center"/>
                <TextBox x:Name="BackupCodeTextBox" 
                         FontFamily="Consolas" FontSize="18" FontWeight="Bold"
                         TextAlignment="Center" MaxLength="9"
                         Width="200" Height="50" Padding="10"
                         Margin="0,0,0,20" BorderThickness="2"
                         BorderBrush="#ffc107"/>
                
                <Button x:Name="VerifyBackupButton" Content="âœ… Verify Backup Code" 
                        Style="{StaticResource SuccessButton}" 
                        Click="VerifyBackupButton_Click" 
                        Width="180" HorizontalAlignment="Center"/>
            </StackPanel>

        </StackPanel>

        <!-- Footer -->
        <Grid Grid.Row="2" Margin="0,30,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Alternative Options -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                <Button x:Name="UseBackupCodeButton" Content="ðŸ”‘ Use Backup Code" 
                        Style="{StaticResource LinkButton}" 
                        Click="UseBackupCodeButton_Click"/>
                <TextBlock Text=" | " VerticalAlignment="Center" Foreground="#666" Margin="5,0"/>
                <Button x:Name="UsePrimaryMethodButton" Content="ðŸ“± Use Primary Method" 
                        Style="{StaticResource LinkButton}" 
                        Click="UsePrimaryMethodButton_Click" Visibility="Collapsed"/>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock x:Name="StatusText" Text="Enter your verification code to continue" 
                           VerticalAlignment="Center" Margin="0,0,20,0" 
                           FontWeight="Bold" Foreground="#6c757d"/>
                <Button Content="âŒ Cancel" Style="{StaticResource DangerButton}" 
                        Click="CancelButton_Click" Width="100"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>