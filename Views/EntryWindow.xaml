<Window x:Class="WeighbridgeSoftwareYashCotex.Views.EntryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Entry - Weighbridge Software" 
        Width="900" Height="700"
        WindowStartupLocation="CenterOwner">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/ValidationStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <Border Background="White" Padding="20" BorderBrush="Gray" BorderThickness="1">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <TextBlock Grid.Row="0" Text="VEHICLE ENTRY" FontSize="20" FontWeight="Bold" 
                          HorizontalAlignment="Center" Margin="0,0,0,20"/>

                <!-- Form Fields -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- RST Number -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="RST Number:" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="RstNumberTextBox" IsReadOnly="True" 
                            Background="LightGray" Margin="0,5"/>

                    <!-- ID -->
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="ID:" FontWeight="Bold" VerticalAlignment="Center" Margin="20,0,10,0"/>
                    <TextBox Grid.Row="0" Grid.Column="3" x:Name="IdTextBox" IsReadOnly="True" 
                            Background="LightGray" Margin="0,5"/>

                    <!-- Vehicle Number -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Vehicle Number:*" FontWeight="Bold" VerticalAlignment="Top" Margin="0,8,10,0"/>
                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,5">
                        <TextBox x:Name="VehicleNumberTextBox" 
                                Style="{StaticResource ValidatedTextBoxStyle}"
                                CharacterCasing="Upper" MaxLength="10"
                                TextChanged="VehicleNumberTextBox_TextChanged"
                                LostFocus="VehicleNumberTextBox_LostFocus"
                                ToolTip="Enter vehicle registration number (4-10 characters)"/>
                        <TextBlock x:Name="VehicleNumberValidation" Style="{StaticResource ValidationMessageStyle}"/>
                        <ProgressBar x:Name="VehicleNumberLoading" Style="{StaticResource LoadingIndicatorStyle}"/>
                    </StackPanel>

                    <!-- Phone Number -->
                    <TextBlock Grid.Row="1" Grid.Column="2" Text="Phone Number:*" FontWeight="Bold" VerticalAlignment="Top" Margin="20,8,10,0"/>
                    <StackPanel Grid.Row="1" Grid.Column="3" Margin="0,5">
                        <TextBox x:Name="PhoneNumberTextBox" 
                                Style="{StaticResource ValidatedTextBoxStyle}"
                                MaxLength="10"
                                TextChanged="PhoneNumberTextBox_TextChanged"
                                LostFocus="PhoneNumberTextBox_LostFocus"
                                PreviewTextInput="PhoneNumberTextBox_PreviewTextInput"
                                ToolTip="Enter 10-digit mobile number"/>
                        <TextBlock x:Name="PhoneNumberValidation" Style="{StaticResource ValidationMessageStyle}"/>
                        <ProgressBar x:Name="PhoneNumberLoading" Style="{StaticResource LoadingIndicatorStyle}"/>
                    </StackPanel>

                    <!-- Name -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Name:*" FontWeight="Bold" VerticalAlignment="Top" Margin="0,8,10,0"/>
                    <StackPanel Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,5">
                        <ComboBox x:Name="NameComboBox" 
                                 Style="{StaticResource ValidatedComboBoxStyle}"
                                 IsEditable="True"
                                 TextBoxBase.TextChanged="NameComboBox_TextChanged"
                                 LostFocus="NameComboBox_LostFocus"
                                 SelectionChanged="NameComboBox_SelectionChanged"
                                 ToolTip="Enter customer name (auto-complete available)"/>
                        <TextBlock x:Name="NameValidation" Style="{StaticResource ValidationMessageStyle}"/>
                    </StackPanel>

                    <!-- Address -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Address:*" FontWeight="Bold" VerticalAlignment="Top" Margin="0,8,10,0"/>
                    <StackPanel Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,5">
                        <ComboBox x:Name="AddressComboBox" 
                                 Style="{StaticResource ValidatedComboBoxStyle}"
                                 IsEditable="True"
                                 TextBoxBase.TextChanged="AddressComboBox_TextChanged"
                                 LostFocus="AddressComboBox_LostFocus"
                                 ToolTip="Enter customer address (auto-complete available)"/>
                        <TextBlock x:Name="AddressValidation" Style="{StaticResource ValidationMessageStyle}"/>
                    </StackPanel>

                    <!-- Material -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Material:*" FontWeight="Bold" VerticalAlignment="Top" Margin="0,8,10,0"/>
                    <StackPanel Grid.Row="4" Grid.Column="1" Margin="0,5">
                        <ComboBox x:Name="MaterialComboBox" 
                                 Style="{StaticResource ValidatedComboBoxStyle}"
                                 SelectedIndex="0"
                                 SelectionChanged="MaterialComboBox_SelectionChanged"
                                 ToolTip="Select material type"/>
                        <TextBlock x:Name="MaterialValidation" Style="{StaticResource ValidationMessageStyle}"/>
                    </StackPanel>

                    <!-- Weight -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Entry Weight:*" FontWeight="Bold" VerticalAlignment="Top" Margin="0,8,10,0"/>
                    <StackPanel Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0" x:Name="WeightTextBox" 
                                    Style="{StaticResource ValidatedTextBoxStyle}"
                                    IsReadOnly="True" 
                                    Background="LightYellow" FontWeight="Bold" FontSize="16"
                                    ToolTip="Current weight from weighbridge"/>
                            <TextBlock Grid.Column="1" Text="KG" Margin="10,0,20,0" VerticalAlignment="Center" FontWeight="Bold"/>
                            <Button Grid.Column="2" Content="📏 Capture Weight" 
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Click="CaptureWeight_Click" HorizontalAlignment="Left"/>
                        </Grid>
                        <TextBlock x:Name="WeightValidation" Style="{StaticResource ValidationMessageStyle}"/>
                        <ProgressBar x:Name="WeightLoading" Style="{StaticResource LoadingIndicatorStyle}"/>
                    </StackPanel>

                    <!-- Date & Time -->
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="Date &amp; Time:" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBox Grid.Row="6" Grid.Column="1" x:Name="DateTimeTextBox" IsReadOnly="True" 
                            Background="LightGray" Margin="0,5"/>

                    <!-- Validation Messages -->
                    <TextBlock Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="4" x:Name="ValidationMessageTextBlock" 
                              Style="{StaticResource ErrorTextStyle}" 
                              Margin="0,10" Visibility="Collapsed"/>

                    <!-- Instructions -->
                    <Border Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="4" 
                           Background="LightBlue" CornerRadius="4" Padding="10" Margin="0,20,0,0">
                        <StackPanel>
                            <TextBlock Text="Instructions:" FontWeight="Bold" Margin="0,0,0,5"/>
                            <TextBlock Text="• Vehicle Number: 9-10 characters (letters and digits only)" FontSize="12"/>
                            <TextBlock Text="• Phone Number: Exactly 10 digits only" FontSize="12"/>
                            <TextBlock Text="• Name and Address will auto-complete if exists in database" FontSize="12"/>
                            <TextBlock Text="• Material must be selected from dropdown" FontSize="12"/>
                            <TextBlock Text="• Use TAB or Arrow keys to navigate between fields" FontSize="12"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Form Status -->
                <Border Grid.Row="2" Background="#F8F9FA" CornerRadius="6" Padding="15" Margin="0,10,0,20">
                    <StackPanel>
                        <TextBlock x:Name="FormStatusText" Text="Please fill all required fields to save entry" 
                                  FontStyle="Italic" Foreground="#6C757D" HorizontalAlignment="Center"/>
                        <ProgressBar x:Name="FormProgressBar" Height="4" Margin="0,10,0,0" 
                                    Maximum="5" Value="0" Foreground="#28A745"/>
                    </StackPanel>
                </Border>

                <!-- Action Buttons -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" 
                           Margin="0,20">
                    <Button Content="💾 Save Entry (F6)" x:Name="SaveButton" 
                           Style="{StaticResource SuccessButtonStyle}"
                           Click="SaveButton_Click" IsEnabled="False"/>
                    <Button Content="🗑️ Clear Form (F7)" x:Name="ClearButton" 
                           Style="{StaticResource WarningButtonStyle}"
                           Click="ClearButton_Click"/>
                    <Button Content="❌ Close (Esc)" x:Name="CloseButton" 
                           Style="{StaticResource DangerButtonStyle}"
                           Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Border>
</Window>